(()=>{"use strict";var e=function(e){e.classList.remove("popup__edit_error"),e.nextElementSibling.textContent=""},t=function(e){return e.some((function(e){return!e.validity.valid}))};function n(e,n){t(e)?n.classList.add("popup__save_disabled"):n.classList.remove("popup__save_disabled")}var o=document.querySelector(".popup_type_profile"),r=document.querySelector(".popup_type_card-form"),c=document.querySelector(".popup_type_image"),p=document.querySelector(".photo-grid__list"),i=document.querySelectorAll(".popup"),d=document.querySelector(".profile__name"),l=document.querySelector(".profile__job"),a=c.querySelector(".popup__place-name"),u=c.querySelector(".popup__image"),s=o.querySelector(".popup__save"),_=o.querySelector(".popup__close"),m=r.querySelector(".popup__close"),f=document.querySelector(".profile__edit"),v=document.querySelector(".profile__button"),y=c.querySelector(".popup__close"),g=document.getElementById("name"),E=document.getElementById("job");function S(t){var r=t.target;if(r){var p=r.nextElementSibling.querySelector(".photo-grid__city");a.textContent=p.textContent,u.src=r.src,c.classList.add("popup_background_opened"),c.firstElementChild.classList.add("popup_opened")}else if(t.classList.add("popup_opened"),t.firstElementChild.classList.add("popup_opened"),t===o){g.value=d.textContent,E.value=l.textContent;var i=Array.from(t.querySelectorAll(".popup__edit"));n(i,t.querySelector(".popup__save")),i.forEach((function(t){e(t)}))}}function h(){document.querySelectorAll(".popup").forEach((function(e){e.classList.remove("popup_opened"),e.classList.remove("popup_background_opened"),e.firstElementChild.classList.remove("popup_opened")}))}var k=document.querySelector(".photo-grid__list"),q=document.querySelector(".popup_type_card-form").querySelector(".popup__form"),L=document.getElementById("newPlace"),x=document.getElementById("newUrl"),b=document.getElementById("card");p.addEventListener("click",(function(e){e.target.classList.contains("photo-grid__image")&&S(e)})),f.addEventListener("click",(function(){S(o)})),v.addEventListener("click",(function(){S(r)})),_.addEventListener("click",(function(){h()})),m.addEventListener("click",(function(){h()})),y.addEventListener("click",(function(){h()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&h()})),i.forEach((function(e){e.addEventListener("click",(function(e){e.target.classList.contains("popup")&&h()}))})),s.addEventListener("click",(function(e){e.preventDefault();var t=g.value,n=E.value;d.textContent=t,l.textContent=n,h()})),k.addEventListener("click",(function(e){e.target.classList.contains("photo-grid__delete")&&function(e){e.target.parentElement.remove()}(e)})),k.addEventListener("click",(function(e){e.target.classList.contains("photo-grid__like")&&function(e){e.target.classList.toggle("photo-grid__like_active")}(e)})),q.addEventListener("submit",(function(e){e.preventDefault();var t=L.value,n=x.value,o=b.content.cloneNode(!0);o.querySelector(".photo-grid__city").textContent=t,o.querySelector(".photo-grid__image").src=n,k.prepend(o),L.value="",x.value="",h()})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=b.content.cloneNode(!0);t.querySelector(".photo-grid__image").src=e.link,t.querySelector(".photo-grid__city").textContent=e.name,k.prepend(t)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(t){!function(t){var o=Array.from(t.querySelectorAll(".popup__edit")),r=t.querySelector(".popup__save");n(o,r),o.forEach((function(t){t.addEventListener("input",(function(){!function(t){t.validity.valid?e(t):function(e,t){e.classList.add("popup__edit_error"),e.nextElementSibling.textContent=t}(t,t.validationMessage)}(t),n(o,r)}))}))}(t)}))})();